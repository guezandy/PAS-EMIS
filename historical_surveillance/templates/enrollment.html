{% extends "base.html" %} {% load crispy_forms_filters %} {% load
crispy_forms_tags %} {% block page_content %}
<!-- This form handles the creation of schools in each district.
The error handling needs to be reviewed for now, it takes the error messaged passed as a dictionary
from the school view and displays to the user preventing duplicate data entry.
The form is redirected to the home page of the app when a data is inserted to prevent double insert
of the same data which is also handled by the error message displayed.
-->
<main>
  <div class="row">
    <div class="col-md-6">
      <h1>National Enrollment by Grade and Sex</h1>
    </div>
    <div class="col-md-6 action-button-group">
      <a href="{% url 'surveillance:create-school' %}"
        ><button type="button" class="btn btn-success mb-2">
          Add Record
        </button></a
      >
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="card mb-4">
        <div class="card-body">

          <div class="table-responsive">
            <table class="table table-bordered" id="dataTable" max-width="100%">
              <thead>
                <tr>
                  <th>Name of School</th>
                  <th>Academic Year</th>
                  <th>Grade</th>
                  <th>Sex</th>
                  <th>Enrollment</th>
                  <th>Minimum Age</th>
                  <th>Maximum Age</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for school in name_of_school %}
                <tr>
                  <td>{{ school.school }}</td>
                  <td>{{ school.year }}</td>
                  <td>{{ school.grade }}</td>
                  <td>{{ school.sex }}</td>
                  <td>{{ school.enrollment }}</td>
                  <td>{{ school.minimum_age }}</td>
                  <td>{{ school.maximum_age }}</td>
                  <td>
                    <a class="btn btn-primary" href="/historical/update_enrollment/{{ school.id}}"
                      ><i class="fas fa-pencil-alt"></i> Edit</a
                    >
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-12">
      <div class="card bg-transparent container-fluid text-dark mb-4">
        <div class="card-body">
          <h3>Enrollment by grade and sex</h3>
          {% if error_message %}
          <div
            class="alert alert-danger alert-dismissible fade show"
            role="alert"
          >
            {{ error_message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="close"
            ></button>
          </div>
          {% endif%}
        </div>
        <form method="post" action="">
          {% csrf_token %} {{ form | crispy }}
          <br /><input
            type="submit"
            value="Submit"
            class="btn btn-lg btn-primary"
          />
        </form>
      </div>
    </div>
  </div>
</main>

{% endblock%}
