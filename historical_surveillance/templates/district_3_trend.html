{% extends "base.html" %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}
{% block page_content %}
<main>
  <div class="row">
      <div class="col-xl-4 col-md-4">
          <div class="card bg-primary text-white mb-4">
              <div class="card-body"><h3>District Three Primary & Secondary Schools</h3>
                  <p>District Three has a total of {{ number_of_primary }} primary schools and {{ number_of_secondary }} secondary schools</p>
              </div>
              <div class="card-footer d-flex align-items-center justify-content-between">
                  <div class="card mb-4">
                      <div class="table-responsive">
                            <table class="table table-bordered" id="dataTable" max-width="100%">
                                <thead>
                                <tr>
                                    <th>Name of School</th>
                                    <th>Category of School</th>
                                </tr>
                                </thead>
                                <tfoot>
                                <tr>
                                    <th>Name of School</th>
                                    <th>Category of School</th>
                                </tr>
                                </tfoot>
                                <tbody>
                                {% for school in name_of_school %}
                                    <tr>
                                        <td>{{ school.name_of_school }}</td>
                                        <td>{{ school.category_of_school }}</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="col-xl-8 col-md-8">
          <div class="card bg-secondary text-white mb-4">
              <div class="card-body">District 3 Enrollment / Capacity Trend<br/>
                <h1 class ="text-info">{% if error_message %} {{ error_message }} {% endif%}</h1></div>
              <div class="card-footer d-flex align-items-center justify-content-between">
              {% if request.POST %}
                  {% if graph %}
                  <img src ="data:image/png;base64, {{ graph | safe}}"/>
                  {%endif%}
              {% endif%}

               <form action="" method="POST">
                   {% csrf_token %}
                   	<div class="form-row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="small mb-1" for="chart_type">Choose a Chart type</label>
                                <select name ="chart" id = "chart_type">
                                    <option value ="" selected>[Choose Here]</option>
                                    <option value ="barplot">Bar Plot</option>
                                    <option value ="lineplot">Line Plot</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label class="small mb-1" for="school">Select a school</label>
                            <select name ="school_name" id = "school">
                                <option value ="" selected>[Choose Here]</option>
                                {% for item in schools %}
                                <option value = "{{ item }}">{{ item }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                   <br/><input type ="submit" name ="submit" class ="btn btn-primary" value="Get Trend"/>
               </form>
              </div>
          </div>
      </div>
  </div>


</main>
{% endblock page_content %}